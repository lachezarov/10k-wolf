function prepare(a){for(var b=0;b<a.length;b++){var c=a[b];partsData[b]={el:c,startX:0,endX:0,startY:0,endY:0,startRotation:0,endRotation:0,startOpacity:1,endOpacity:1}}}function animateParts(a){var b=1e3,c=Date.now(),d=c+b;animated=!0,requestAnimationFrame(function(){c=Date.now(),partsStep(a,b,c,d)})}function partsStep(a,b,c,d){for(var e=0;e<a.length;e++){var f=a[e],g=(b-(d-c))/b*100;g>100&&(g=100),g/=100;var h,i,j,k;h=0===f.endX?f.startX>0?f.startX-f.startX*g:f.startX+Math.abs(f.startX)*g:f.endX*g,i=0===f.endY?f.startY>0?f.startY-f.startY*g:f.startY+Math.abs(f.startY)*g:f.endY*g,j=0===f.endRotation?f.startRotation-f.startRotation*g:f.endRotation*g,1===f.endOpacity?(k=f.endOpacity*g,k<f.startOpacity&&(k=f.startOpacity)):k=(f.endOpacity-f.startOpacity)*g+f.startOpacity,function(a,b,c,d,e){setPartTransform(a.el,b,c,d),setPartOpacity(a.el,e)}(f,h,i,j,k)}c<=d?requestAnimationFrame(function(){c=Date.now(),partsStep(a,b,c,d)}):animated=!1}function scatterParts(a){for(i=0;i<a.length;i++){var b=a[i];!function(a){scatterPart(a)}(b)}button.innerHTML="Assemble",wolf.classList.add("scattered"),wolf.setAttribute("title","Scattered Particles"),scattered=!0}function scatterPart(a,b){var c=getRandom(max)-300,d=getRandom(max)-300,e=getRandom(80),f=getRandom(100)/100;b&&(c/=30,d/=30,e/=20),a.startX=0,a.startY=0,a.startRotation=0,a.startOpacity=1,a.endX=c,a.endY=d,a.endRotation=e,a.endOpacity=f}function setPartTransform(a,b,c,d){var e="translate("+b+", "+c+") rotate("+d+")";a.setAttribute("transform",e)}function setPartOpacity(a,b){a.setAttribute("fill-opacity",b)}function resetParts(a){for(var b=0;b<a.length;b++){var c=a[b];!function(a){resetPart(a)}(c)}button.innerHTML="Scatter",wolf.classList.remove("scattered"),wolf.setAttribute("title","Wolf Head"),scattered=!1}function resetPart(a){a.startX=a.endX,a.startY=a.endY,a.startRotation=a.endRotation,a.startOpacity=a.endOpacity,a.endX=0,a.endY=0,a.endRotation=0,a.endOpacity=1}function getRandom(a){return Math.floor(Math.random()*a)}function randomBackground(){var a=Math.floor(255*Math.random()),b=Math.floor(255*Math.random()),c=Math.floor(255*Math.random());return"rgb("+a+", "+b+", "+c+")"}function setRandomBackground(){body.style.backgroundColor=randomBackground()}var wolf,parts,button,body,partsData=[],max=800,scattered=!1,animated=!1;addEventListener("DOMContentLoaded",function(){body=document.getElementsByTagName("body")[0],wolf=document.getElementById("wolf"),parts=wolf.querySelectorAll("polygon, path, rect"),button=document.createElement("button"),button.id="toggle",button.innerHTML="Assemble",button.title="Toggle Animation";var a=document.createElement("nav");a.appendChild(button),body.appendChild(a),prepare(parts),scatterParts(partsData),setRandomBackground(),animateParts(partsData),button.addEventListener("click",function(a){animated||(scattered?resetParts(partsData):scatterParts(partsData),setRandomBackground(),animateParts(partsData))}),addEventListener("mousemove",function(a){var b=window.innerWidth/2,c=window.innerHeight/2,d=(a.pageX-b)/b*30,e=(a.pageY-c)/c*-30;wolf.style.transform="rotateX("+e+"deg) rotateY("+d+"deg)"}),addEventListener("touchmove",function(a){a.preventDefault()}),"undefined"!=typeof DeviceMotionEvent&&DeviceMotionEvent&&addEventListener("devicemotion",function(a){var d=(window.innerWidth/2,window.innerHeight/2,a.accelerationIncludingGravity.x*-7),e=5*a.accelerationIncludingGravity.y;90===orientation||orientation===-90?wolf.style.transform="rotateY("+e+"deg)":wolf.style.transform="rotateY("+d+"deg)"})});